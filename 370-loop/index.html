<!DOCTYPE html>

<html lang="ja" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>8. 3大構造 三. 反復 &#8212; start-programming-with-python  ドキュメント</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=c058f7c8" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=27fed22d" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=0c5d2aad" />
    <script src="../_static/documentation_options.js?v=c033477b"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/translations.js?v=91613774"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="next" title="9. 複数の値をまとめて扱おう" href="../380-list/index.html" />
    <link rel="prev" title="7. 3大構造 二. 分岐" href="../360-fork/index.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="loop">
<span id="id1"></span><h1><span class="section-number">8. </span>3大構造 三. 反復<a class="headerlink" href="#loop" title="Link to this heading">¶</a></h1>
<p>この章では、プログラムの3大構造の3つ目「反復（はんぷく）」を学びます。
反復とは「<strong>繰り返し</strong>」です。</p>
<p>反復には2つのパターンがあります。</p>
<ol class="arabic simple">
<li><p><strong>決まった回数</strong>、ある処理を繰り返す</p></li>
<li><p><strong>条件を満たす限り</strong>、ある処理を繰り返す</p></li>
</ol>
<p>どちらも、ふだんの生活に例があります。
1の例は、「知人1人1人について、住所と宛名を変えながら年賀状を印刷する」ケースです。
知人の人数だけ繰り返します。
2の例は、ゲームで「ボスのHP（ヒットポイント）が0になるまで攻撃を繰り返す」ケースです。</p>
<p>反復を実現するのに、次のものを使います。</p>
<ol class="arabic simple">
<li><p>決まった回数、ある処理を繰り返す → <code class="docutils literal notranslate"><span class="pre">for</span></code> 文と、複数の値を扱う仕組み</p></li>
<li><p>条件を満たす限り、ある処理を繰り返す → <code class="docutils literal notranslate"><span class="pre">while</span></code> 文</p></li>
</ol>
<p>順番に見ていきましょう。</p>
<section id="for">
<span id="loop-for"></span><h2><span class="section-number">8.1. </span><code class="docutils literal notranslate"><span class="pre">for</span></code> 文を使って、決まった回数繰り返す<a class="headerlink" href="#for" title="Link to this heading">¶</a></h2>
<p>「決まった回数、ある処理を繰り返す」のに使うのは、次の2つです。</p>
<ul class="simple">
<li><p>リスト</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">for</span></code> 文</p></li>
</ul>
<section id="id2">
<h3><span class="section-number">8.1.1. </span>リスト<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h3>
<p>リストの説明は、反復に必要な範囲の説明に留めています。
次の <a class="reference internal" href="../380-list/index.html#list"><span class="std std-numref">9 章</span></a> 「<a class="reference internal" href="../380-list/index.html#list"><span class="std std-ref">複数の値をまとめて扱おう</span></a>」で詳しく紹介します。</p>
<p>リストは、<strong>複数の値をまとめた値</strong> です。
数値や文字列は1つの値でした。
複数の数値や文字列をまとめるのに、リストを使います。</p>
<p>リストは複数の値を <code class="docutils literal notranslate"><span class="pre">[]</span></code> で囲んで書きます。
複数の値はカンマ（<code class="docutils literal notranslate"><span class="pre">,</span></code>）で区切って <code class="docutils literal notranslate"><span class="pre">[]</span></code> の中に並べます。</p>
<p>対話モードで、リストを作ってみましょう。
複数の数値 <code class="docutils literal notranslate"><span class="pre">1</span></code> 、 <code class="docutils literal notranslate"><span class="pre">2</span></code> 、 <code class="docutils literal notranslate"><span class="pre">3</span></code> をまとめて扱うリストです。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="go">[1, 2, 3]</span>
</pre></div>
</div>
<p>続いて、複数の文字列をまとめて扱うリストです。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="s2">&quot;吾輩は猫である&quot;</span><span class="p">,</span> <span class="s2">&quot;坊っちゃん&quot;</span><span class="p">]</span>
<span class="go">[&#39;吾輩は猫である&#39;, &#39;坊っちゃん&#39;]</span>
</pre></div>
</div>
<div class="column admonition">
<p class="admonition-title">[コラム] リストでカンマの後ろに半角スペースを入れるのはなぜ？</p>
<p>リストにまとめた値を区切るカンマの後ろに半角スペースを入れなくても、できあがるリストに違いはありません。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="go">[1, 2, 3]</span>
</pre></div>
</div>
<p><strong>プログラムを読みやすくするため</strong> に、半角スペースが入れられます。
本書でもカンマの後ろに半角スペースを入れます。</p>
</div>
</section>
<section id="id3">
<h3><span class="section-number">8.1.2. </span><code class="docutils literal notranslate"><span class="pre">for</span></code> 文<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">for</span></code> 文も文の1種で、別の文を含められる文です。
以下のように書きます。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">変数</span> <span class="ow">in</span> <span class="n">リスト</span><span class="p">:</span>  <span class="c1"># ((半角スペースが1つずつ入ります。また、コロンを忘れずに！))</span>
    <span class="n">処理</span><span class="err">（</span><span class="n">文</span><span class="err">（</span><span class="n">の並び</span><span class="err">））</span>  <span class="c1"># ((先頭のインデントを忘れずに！))</span>
</pre></div>
</div>
<p>リストにまとめられた値を <strong>1つ1つ変数に代入し、処理を繰り返し</strong> ます。</p>
<p>処理は何行でも（1行だけでも100行でも）書けますが、インデントを揃える必要があります
（1行でもインデントが異なると <code class="docutils literal notranslate"><span class="pre">IndentationError</span></code> となります）。</p>
<p>リストにまとめられた値が、<code class="docutils literal notranslate"><span class="pre">for</span></code> 文で変数に代入される様子を例で見てみましょう。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]:</span>
    <span class="n">変数iを使った処理</span>
</pre></div>
</div>
<p>リストでは、左が先頭で右が末尾と、<strong>左から右</strong> の順で値が並んでいます。
<code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]</span></code> の場合は、<code class="docutils literal notranslate"><span class="pre">1</span></code> が先頭で、<code class="docutils literal notranslate"><span class="pre">2</span></code> がその次、<code class="docutils literal notranslate"><span class="pre">3</span></code> が末尾です。</p>
<p><code class="docutils literal notranslate"><span class="pre">for</span></code> 文で変数に代入するときは、リストにまとめられた値の順番に従います。
<strong>リストの先頭からはじめて、次の値、次の値</strong> と代入されます。</p>
<ol class="arabic simple">
<li><p>まず <code class="docutils literal notranslate"><span class="pre">i</span></code> に <code class="docutils literal notranslate"><span class="pre">1</span></code> を代入して処理を行います。</p></li>
<li><p>続いて <code class="docutils literal notranslate"><span class="pre">i</span></code> に次の <code class="docutils literal notranslate"><span class="pre">2</span></code> を代入して処理を行い、</p></li>
<li><p>さらに <code class="docutils literal notranslate"><span class="pre">i</span></code> に次の <code class="docutils literal notranslate"><span class="pre">3</span></code> を代入して処理を行います。</p></li>
</ol>
<p>処理の中で変数 <code class="docutils literal notranslate"><span class="pre">i</span></code> を評価すると、指す値がリストの順番に沿って変わるのです。</p>
<p>リストの末尾に達し、<strong>変数に代入する次の値がなくなったら</strong>、<code class="docutils literal notranslate"><span class="pre">for</span></code> 文に続く処理に進みます。</p>
<p>Atomで <code class="docutils literal notranslate"><span class="pre">renshu_for.py</span></code> というファイルを作りましょう。</p>
<div class="literal-block-wrapper docutils container" id="id10">
<div class="code-block-caption"><span class="caption-text">renshu_for.py</span><a class="headerlink" href="#id10" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;for文の練習プログラムを開始します&quot;</span><span class="p">)</span>
<span class="linenos">2</span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]:</span>
<span class="linenos">3</span>    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="linenos">4</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;プログラムを終了します&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>ファイルを実行して、処理系に <code class="docutils literal notranslate"><span class="pre">for</span></code> 文を実行させましょう。</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span>python<span class="w"> </span>renshu_for.py
</pre></div>
</div>
<p>macOSでは読み替えが必要です。
詳しくは <a class="reference internal" href="../350-in_order/index.html#in-order"><span class="std std-numref">6 章</span></a> の「<a class="reference internal" href="../350-in_order/index.html#in-order-command-reference"><span class="std std-ref">はじめてのファイルを使ったプログラム</span></a>」を確認してください。</p>
<p><kbd class="kbd docutils literal notranslate">Enter</kbd> キーを押して実行すると、リストの順番に従って、1、2、3と3行出力されます。</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span>python<span class="w"> </span>renshu_for.py
for文の練習プログラムを開始します
<span class="m">1</span>
<span class="m">2</span>
<span class="m">3</span>
プログラムを終了します
</pre></div>
</div>
<p>リストの先頭から末尾へと繰り返す様子をつかんでください。</p>
<table class="docutils align-center" id="id11">
<caption><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">renshu_for.py</span></code> における繰り返し</span><a class="headerlink" href="#id11" title="Link to this table">¶</a></caption>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">i</span></code> の指す値</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">for</span></code> の処理（<code class="docutils literal notranslate"><span class="pre">print(i)</span></code>）</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">1</span></code> （先頭）</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1</span></code> を表示</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">2</span></code> （次の値）</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">2</span></code> を表示</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">3</span></code> （次の値）</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">3</span></code> を表示</p></td>
</tr>
<tr class="row-odd"><td><p>（リストの末尾に達していて、次の値はない）</p></td>
<td><p>（<code class="docutils literal notranslate"><span class="pre">for</span></code> 文の後の4行目に進む）</p></td>
</tr>
</tbody>
</table>
<figure class="align-center" id="id12">
<img alt="../_images/9-22_for_1.drawio.png" src="../_images/9-22_for_1.drawio.png" />
<figcaption>
<p><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">i</span></code> が <code class="docutils literal notranslate"><span class="pre">1</span></code> を指す状態で、処理（3行目）を実行</span><a class="headerlink" href="#id12" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id13">
<img alt="../_images/9-23_for_2.drawio.png" src="../_images/9-23_for_2.drawio.png" />
<figcaption>
<p><span class="caption-text">再度 <code class="docutils literal notranslate"><span class="pre">for</span></code> の行（2行目）に戻り、<code class="docutils literal notranslate"><span class="pre">i</span></code> が次の <code class="docutils literal notranslate"><span class="pre">2</span></code> を指す状態で、処理を実行</span><a class="headerlink" href="#id13" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id14">
<img alt="../_images/9-24_for_3.drawio.png" src="../_images/9-24_for_3.drawio.png" />
<figcaption>
<p><span class="caption-text">三度 <code class="docutils literal notranslate"><span class="pre">for</span></code> の行に戻り、<code class="docutils literal notranslate"><span class="pre">i</span></code> が次の <code class="docutils literal notranslate"><span class="pre">3</span></code> を指す状態で、処理を実行</span><a class="headerlink" href="#id14" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id15">
<img alt="../_images/9-25_for_4.drawio.png" src="../_images/9-25_for_4.drawio.png" />
<figcaption>
<p><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">for</span></code> の行に戻るが、リストに次の値がなくなったので、<code class="docutils literal notranslate"><span class="pre">for</span></code> 文の次の文に進む</span><a class="headerlink" href="#id15" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p><code class="docutils literal notranslate"><span class="pre">print</span></code> 関数を使って、リストの中身を表示する例を紹介しました。
リストと <code class="docutils literal notranslate"><span class="pre">for</span></code> 文を使って、<strong>リストにまとめられた値それぞれに対して1回ずつ処理を実行</strong> できます。</p>
</section>
<section id="id4">
<h3><span class="section-number">8.1.3. </span>練習問題<a class="headerlink" href="#id4" title="Link to this heading">¶</a></h3>
<p>筆者の名前のリストを使って、本書の筆者全員に1回ずつ挨拶しましょう。</p>
<p>筆者の名前のリストは <code class="docutils literal notranslate"><span class="pre">[&quot;susumuis&quot;,</span> <span class="pre">&quot;nao_y&quot;,</span> <span class="pre">&quot;nikkie&quot;]</span></code> とします。
挨拶する部分は、これまで書いてきたプログラムにならって、「〇〇さん、ごきげんよう」と表示しましょう（〇〇には筆者の名前が入ります）。
ファイル <code class="docutils literal notranslate"><span class="pre">renshu_for.py</span></code> を編集してください。</p>
<p>ヒント：筆者の名前のリストの中身を表示するには、次のようにすればいいですね。</p>
<div class="literal-block-wrapper docutils container" id="id16">
<div class="code-block-caption"><span class="caption-text">renshu_for.py（練習問題のヒント）</span><a class="headerlink" href="#id16" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">for</span> <span class="n">hissha</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;susumuis&quot;</span><span class="p">,</span> <span class="s2">&quot;nao_y&quot;</span><span class="p">,</span> <span class="s2">&quot;nikkie&quot;</span><span class="p">]:</span>
<span class="linenos">2</span>    <span class="nb">print</span><span class="p">(</span><span class="n">hissha</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>あとは表示内容を「(筆者の名前)さん、ごきげんよう」と変えるだけです。</p>
<div class="answer admonition">
<p class="admonition-title">[解答]</p>
<div class="literal-block-wrapper docutils container" id="id17">
<div class="code-block-caption"><span class="caption-text">renshu_for.py</span><a class="headerlink" href="#id17" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">for</span> <span class="n">hissha</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;susumuis&quot;</span><span class="p">,</span> <span class="s2">&quot;nao_y&quot;</span><span class="p">,</span> <span class="s2">&quot;nikkie&quot;</span><span class="p">]:</span>
<span class="linenos">2</span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">hissha</span><span class="si">}</span><span class="s2">さん、ごきげんよう&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>実行すると、筆者1人1人に挨拶します。</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span>python<span class="w"> </span>renshu_for.py
susumuisさん、ごきげんよう
nao_yさん、ごきげんよう
nikkieさん、ごきげんよう
</pre></div>
</div>
<table class="docutils align-center" id="id18">
<caption><span class="caption-text">変更した <code class="docutils literal notranslate"><span class="pre">renshu_for.py</span></code> における繰り返し</span><a class="headerlink" href="#id18" title="Link to this table">¶</a></caption>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hissha</span></code> の指す値</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">for</span></code> の処理</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;susumuis&quot;</span></code> （先頭）</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;susumuis&quot;</span></code> への挨拶を表示</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;nao_y&quot;</span></code> （次の値）</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;nao_y&quot;</span></code> への挨拶を表示</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;nikkie&quot;</span></code> （次の値）</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;nikkie&quot;</span></code> への挨拶を表示</p></td>
</tr>
<tr class="row-odd"><td><p>（リストの末尾に達していて、次の値はない）</p></td>
<td><p>（<code class="docutils literal notranslate"><span class="pre">for</span></code> 文の後の文へ進む）</p></td>
</tr>
</tbody>
</table>
</div>
<div class="advanced admonition">
<p class="admonition-title">[発展] 別の反復処理を繰り返す</p>
<p><code class="docutils literal notranslate"><span class="pre">for</span></code> 文の処理には、<code class="docutils literal notranslate"><span class="pre">for</span></code> 文も書けます。
外側の <code class="docutils literal notranslate"><span class="pre">for</span></code> 文で代入した変数を使って、<strong>別の処理を繰り返せ</strong> ます。</p>
<p>例として、前編／後編がある4巻の書名を全て表示してみます。</p>
<div class="literal-block-wrapper docutils container" id="id19">
<div class="code-block-caption"><span class="caption-text">renshu_for.py</span><a class="headerlink" href="#id19" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;for文の練習プログラムを開始します&quot;</span><span class="p">)</span>
<span class="linenos">2</span><span class="k">for</span> <span class="n">kan</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;杯&quot;</span><span class="p">,</span> <span class="s2">&quot;騎士団&quot;</span><span class="p">,</span> <span class="s2">&quot;王子様&quot;</span><span class="p">,</span> <span class="s2">&quot;秘宝&quot;</span><span class="p">]:</span>
<span class="linenos">3</span>    <span class="k">for</span> <span class="n">hen</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;前編&quot;</span><span class="p">,</span> <span class="s2">&quot;後編&quot;</span><span class="p">]:</span>
<span class="linenos">4</span>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;『</span><span class="si">{</span><span class="n">kan</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">hen</span><span class="si">}</span><span class="s2">』&quot;</span><span class="p">)</span>
<span class="linenos">5</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;プログラムを終了します&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>処理系がプログラムをどう実行するか考えてみましょう。</p>
<p>まず、変数 <code class="docutils literal notranslate"><span class="pre">kan</span></code> が <code class="docutils literal notranslate"><span class="pre">&quot;杯&quot;</span></code> を指した状態で、3,4行目が実行されます。
前編、後編の両方について、書名の表示を繰り返します。</p>
<p>その後、<code class="docutils literal notranslate"><span class="pre">kan</span></code> が指す値は <code class="docutils literal notranslate"><span class="pre">&quot;騎士団&quot;</span></code> 、 <code class="docutils literal notranslate"><span class="pre">&quot;王子様&quot;</span></code> と順番に変わります。
それぞれの値について、2つの編の書名の表示が繰り返されます。</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span>python<span class="w"> </span>renshu_for.py
for文の練習プログラムを開始します
『杯-前編』
『杯-後編』
『騎士団-前編』
『騎士団-後編』
『王子様-前編』
『王子様-後編』
『秘宝-前編』
『秘宝-後編』
プログラムを終了します
</pre></div>
</div>
</div>
</section>
</section>
<section id="while">
<h2><span class="section-number">8.2. </span><code class="docutils literal notranslate"><span class="pre">while</span></code> 文を使って、条件を満たす限り繰り返す<a class="headerlink" href="#while" title="Link to this heading">¶</a></h2>
<p>「条件を満たす限り、ある処理を繰り返す」には、<code class="docutils literal notranslate"><span class="pre">while</span></code> 文を使います。</p>
<section id="id5">
<h3><span class="section-number">8.2.1. </span><code class="docutils literal notranslate"><span class="pre">while</span></code> 文<a class="headerlink" href="#id5" title="Link to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">while</span></code> 文も文の1種で、別の文を含められる文です。
以下のように書きます。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="n">式</span><span class="p">:</span>  <span class="c1"># ((半角スペースが1つずつ入ります。また、コロンを忘れずに！))</span>
    <span class="n">処理</span><span class="err">（</span><span class="n">文</span><span class="err">（</span><span class="n">の並び</span><span class="err">））</span>  <span class="c1"># ((先頭のインデントを忘れずに！))</span>
</pre></div>
</div>
<p><strong>式を評価</strong> して <code class="docutils literal notranslate"><span class="pre">True</span></code> <strong>となる限り、処理を実行</strong> します。</p>
<p><code class="docutils literal notranslate"><span class="pre">while</span></code> に続く式は、<strong>条件</strong> を表します。
この式が <code class="docutils literal notranslate"><span class="pre">True</span></code> と評価されるとき、処理を順次実行します。
処理の中で、条件に使われる変数が更新されます。
処理を実行し終わったら、<strong>再度条件を評価</strong> します。</p>
<ul class="simple">
<li><p>条件が <code class="docutils literal notranslate"><span class="pre">True</span></code> と評価されたら、再び処理を繰り返し、その後、条件を評価します。</p></li>
<li><p>条件が <code class="docutils literal notranslate"><span class="pre">False</span></code> と評価されたら、そこで <code class="docutils literal notranslate"><span class="pre">while</span></code> 文の繰り返しは終了し、続く文を実行します。</p></li>
</ul>
<p>このように、条件が <code class="docutils literal notranslate"><span class="pre">True</span></code> と評価される、すなわち、条件を満たす限り、処理が繰り返し実行されます。</p>
<p>処理の書き方は <code class="docutils literal notranslate"><span class="pre">for</span></code> 文における処理の書き方と同じです。
<code class="docutils literal notranslate"><span class="pre">IndentationError</span></code> を防ぐため、処理のインデントは揃えてください。</p>
<p>Atomで <code class="docutils literal notranslate"><span class="pre">renshu_while.py</span></code> というファイルを作って、練習しましょう。</p>
<div class="literal-block-wrapper docutils container" id="id20">
<div class="code-block-caption"><span class="caption-text">renshu_while.py</span><a class="headerlink" href="#id20" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;while文でオウム返しします&quot;</span><span class="p">)</span>
<span class="linenos">2</span><span class="n">nyuryoku</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;入力してください（qで終了） &quot;</span><span class="p">)</span>
<span class="linenos">3</span><span class="k">while</span> <span class="n">nyuryoku</span> <span class="o">!=</span> <span class="s2">&quot;q&quot;</span><span class="p">:</span>
<span class="linenos">4</span>    <span class="nb">print</span><span class="p">(</span><span class="n">nyuryoku</span><span class="p">)</span>
<span class="linenos">5</span>    <span class="n">nyuryoku</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;入力してください（qで終了） &quot;</span><span class="p">)</span>
<span class="linenos">6</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;プログラムを終了します&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>入力と同じ文字列を表示する練習プログラムを用意しました。</p>
<p>このプログラムでは、比較演算子で文字列を比較しています。
文字列の比較については、「<a class="reference internal" href="../360-fork/index.html#fork"><span class="std std-ref">3大構造 二. 分岐</span></a>」の発展（TODO：Xページ参照）を確認してください。</p>
<p>以下は実行の一例です。</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span>python<span class="w"> </span>renshu_while.py
while文でオウム返しします
入力してください（qで終了）<span class="w"> </span>ごきげんよう
ごきげんよう
入力してください（qで終了）<span class="w"> </span>さしもしらじなもゆるおもひを
さしもしらじなもゆるおもひを
入力してください（qで終了）<span class="w"> </span>q
プログラムを終了します
</pre></div>
</div>
<p>プログラム2行目の <code class="docutils literal notranslate"><span class="pre">input</span></code> 関数で入力を受け取ります。
今回は「ごきげんよう」と入力しました。
この文字列は <code class="docutils literal notranslate"><span class="pre">&quot;q&quot;</span></code> と一致しないので、<code class="docutils literal notranslate"><span class="pre">while</span></code> 文の処理が実行されます。
入力内容が出力され、再度入力を受け取ります。</p>
<p>今度は「さしもしらじなもゆるおもひを」と入力しました。
これも <code class="docutils literal notranslate"><span class="pre">&quot;q&quot;</span></code> と一致しないので、オウム返しをしてから、入力を受け取ります。</p>
<p>「q」と入力すると、<code class="docutils literal notranslate"><span class="pre">while</span></code> の条件は <code class="docutils literal notranslate"><span class="pre">False</span></code> となり、続く処理（プログラム6行目）に進みます。</p>
<table class="docutils align-center" id="id21">
<caption><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">renshu_while.py</span></code> 実行の一例</span><a class="headerlink" href="#id21" title="Link to this table">¶</a></caption>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">nyuryoku</span></code> の指す値</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">while</span></code> の条件 <code class="docutils literal notranslate"><span class="pre">nyuryoku</span> <span class="pre">!=</span> <span class="pre">&quot;q&quot;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">while</span></code> の処理が行われるか</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">while</span></code> の処理</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;ごきげんよう&quot;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
<td><p>◯</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;ごきげんよう&quot;</span></code> を表示。入力を受け取る</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;さしもしらじなもゆるおもひを&quot;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
<td><p>◯</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;さしもしらじなもゆるおもひを&quot;</span></code> を表示。入力を受け取る</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;q&quot;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td><p>×</p></td>
<td><p>実行されない</p></td>
</tr>
</tbody>
</table>
<p>なお、最初に入力した「ごきげんよう」に代えて「q」と入力すると、
<code class="docutils literal notranslate"><span class="pre">while</span></code> 文の条件が成り立たないため、処理は一度も実行されずに、プログラムは終了します。</p>
<figure class="align-center" id="id22">
<img alt="../_images/9-26_while_1.drawio.png" src="../_images/9-26_while_1.drawio.png" />
<figcaption>
<p><span class="caption-text">「ごきげんよう」という入力を受け付けたとき、<code class="docutils literal notranslate"><span class="pre">while</span></code> の行の条件が成り立つので、処理（4, 5行目）を実行する</span><a class="headerlink" href="#id22" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id23">
<img alt="../_images/9-27_while_2.drawio.png" src="../_images/9-27_while_2.drawio.png" />
<figcaption>
<p><span class="caption-text">「さしもしらじなもゆるおもひを」という入力を受け付けた後、<code class="docutils literal notranslate"><span class="pre">while</span></code> の行に戻る。条件が成り立つので、処理を実行する</span><a class="headerlink" href="#id23" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id24">
<img alt="../_images/9-28_while_3.drawio.png" src="../_images/9-28_while_3.drawio.png" />
<figcaption>
<p><span class="caption-text">「q」という入力を受け付けた後、<code class="docutils literal notranslate"><span class="pre">while</span></code> の行に戻る。条件が成り立たないので、<code class="docutils literal notranslate"><span class="pre">while</span></code> 文の次の文に進む</span><a class="headerlink" href="#id24" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p><code class="docutils literal notranslate"><span class="pre">while</span></code> 文を見たら、<strong>条件が成り立たないのはどんなときか</strong> 考えましょう。
<code class="docutils literal notranslate"><span class="pre">while</span></code> 文の繰り返しが止まる状況をイメージできると、他のプログラマーが書いた反復のプログラムも読みやすいでしょう。</p>
</section>
<section id="id6">
<h3><span class="section-number">8.2.2. </span>練習問題<a class="headerlink" href="#id6" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="../360-fork/index.html#fork"><span class="std std-numref">7 章</span></a> 「<a class="reference internal" href="../360-fork/index.html#fork"><span class="std std-ref">3大構造 二. 分岐</span></a>」の練習問題で作った計算アプリを、正解するまで入力を受け付けるように変更してみましょう。
惜しい間違いのフィードバック機能は一度なくして考えてみましょう。</p>
<p>ヒント：間違え続ける限り、入力を受け付けます。</p>
<div class="answer admonition">
<p class="admonition-title">[解答]</p>
<p>想定解を示します。
表示する文面が異なっていても、間違え続ける限り、入力を受け付けるプログラムになっていれば、正解です。</p>
<div class="literal-block-wrapper docutils container" id="id25">
<div class="code-block-caption"><span class="caption-text">keisan.py</span><a class="headerlink" href="#id25" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;計算アプリです&quot;</span><span class="p">)</span>
<span class="linenos">2</span><span class="n">nyuryoku</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;11×12は？ &quot;</span><span class="p">)</span>
<span class="linenos">3</span><span class="n">seikai</span> <span class="o">=</span> <span class="mi">11</span> <span class="o">*</span> <span class="mi">12</span>
<span class="linenos">4</span><span class="k">while</span> <span class="nb">int</span><span class="p">(</span><span class="n">nyuryoku</span><span class="p">)</span> <span class="o">!=</span> <span class="n">seikai</span><span class="p">:</span>
<span class="linenos">5</span>    <span class="n">nyuryoku</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;違います。諦めずに答えてみましょう &quot;</span><span class="p">)</span>
<span class="linenos">6</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;正解です！&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">while</span></code> 文を使って、正解が入力されない限り繰り返しました。</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span>python<span class="w"> </span>keisan.py
計算アプリです
<span class="m">11</span>×12は？<span class="w"> </span><span class="m">122</span>
違います。諦めずに答えてみましょう<span class="w"> </span><span class="m">132</span>
正解です！
</pre></div>
</div>
<p>while 文の処理を工夫すると、惜しい間違いのフィードバック機能も持たせられます。</p>
</div>
<p>反復は、プログラムに処理の <strong>輪</strong> を作っていると見なせます。</p>
<p><code class="docutils literal notranslate"><span class="pre">for</span></code> のリストに次の値がある場合や、<code class="docutils literal notranslate"><span class="pre">while</span></code> の条件が <code class="docutils literal notranslate"><span class="pre">True</span></code> となる場合、
輪が1周回って元の行に戻り、リストの次の値や条件が確認されます。
<code class="docutils literal notranslate"><span class="pre">for</span></code> のリストに続く値がない場合や、<code class="docutils literal notranslate"><span class="pre">while</span></code> の条件が <code class="docutils literal notranslate"><span class="pre">False</span></code> となる場合、そこで輪が切れます。</p>
<div class="advanced admonition">
<p class="admonition-title">[発展] 反復を途中で終了する <code class="docutils literal notranslate"><span class="pre">break</span></code> 文</p>
<p>プログラミングには、<strong>反復を途中で終了</strong> する仕組みも用意されています。
その仕組みは <code class="docutils literal notranslate"><span class="pre">break</span></code> 文と呼ばれます。
<code class="docutils literal notranslate"><span class="pre">break</span></code> 文を使うと、オウム返しのプログラムは以下のようにも書けます。</p>
<div class="literal-block-wrapper docutils container" id="id26">
<div class="code-block-caption"><span class="caption-text">renshu_while.py</span><a class="headerlink" href="#id26" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;while文でオウム返しします&quot;</span><span class="p">)</span>
<span class="linenos">2</span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="linenos">3</span>    <span class="n">nyuryoku</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;入力してください（qで終了） &quot;</span><span class="p">)</span>
<span class="linenos">4</span>    <span class="k">if</span> <span class="n">nyuryoku</span> <span class="o">==</span> <span class="s2">&quot;q&quot;</span><span class="p">:</span>
<span class="linenos">5</span>        <span class="k">break</span>
<span class="linenos">6</span>    <span class="nb">print</span><span class="p">(</span><span class="n">nyuryoku</span><span class="p">)</span>
<span class="linenos">7</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;プログラムを終了します&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>変更点は2箇所あります。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">while</span></code> 文の式を <code class="docutils literal notranslate"><span class="pre">True</span></code> としました。毎回処理を実行します。</p></li>
<li><p>処理の中に分岐があります。<code class="docutils literal notranslate"><span class="pre">nyuryoku</span></code> が指す値（入力値）が <code class="docutils literal notranslate"><span class="pre">&quot;q&quot;</span></code> と一致するとき <code class="docutils literal notranslate"><span class="pre">break</span></code> 文を実行します。</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">break</span></code> 文が実行されると、<code class="docutils literal notranslate"><span class="pre">while</span></code> 文の実行は <strong>そこで終了</strong> し、続く文を実行します。</p>
<p>条件は常に成り立ちますが、入力値によって処理を終了する分岐があるので、反復はどこかで終了します。
<code class="docutils literal notranslate"><span class="pre">break</span></code> 文を使って書き換えて、これまでと同じように動くことを確認してみてください。</p>
</div>
<div class="advanced admonition">
<p class="admonition-title">[発展] 無限ループを止める</p>
<p><code class="docutils literal notranslate"><span class="pre">while</span></code> 文を書き間違えて、際限なく反復し続けるプログラムを書いてしまうことがあります。</p>
<ul class="simple">
<li><p>条件に使う変数の更新忘れ</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">break</span></code> 文の分岐の書き忘れ</p></li>
</ul>
<p>実は、プログラムを実行している処理系は、プログラマーの <strong>キーボード操作で終了</strong> させられます。
2つのキー [<kbd class="kbd docutils literal notranslate">Ctrl</kbd>] と [<kbd class="kbd docutils literal notranslate">C</kbd>] を同時に押してください（WindowsでもmacOSでも共通のキー操作です）。
これを使えば、際限なく反復するプログラムを実行する処理系も止められます。
この2つのキーを押すことで、処理系の実行に <strong>割り込んで</strong> います。</p>
<p>なお、際限のない反復を、プログラマーは「無限ループ」とも呼びます。
「ループ（loop）」には「輪」という意味もあります。</p>
</div>
</section>
</section>
<section id="fizzbuzz">
<h2><span class="section-number">8.3. </span>順次・分岐・反復の力試し（FizzBuzz）<a class="headerlink" href="#fizzbuzz" title="Link to this heading">¶</a></h2>
<p>この節では、順次・分岐・反復を使ってプログラムを1つ作ります。
プログラミングの練習によく使われる問題「FizzBuzz」（読み：フィズバズ）を解くプログラムです。</p>
<section id="id7">
<h3><span class="section-number">8.3.1. </span>FizzBuzzとは<a class="headerlink" href="#id7" title="Link to this heading">¶</a></h3>
<p>FizzBuzzは複数人で遊ぶゲームです。
1から30までの数を順番に1つずつ交互に言っていきます。
ただし、以下の条件を満たす数の場合は、数ではなく別の言葉を言う必要があります。</p>
<ul class="simple">
<li><p>3の倍数のとき、Fizzと言う</p></li>
<li><p>5の倍数のとき、Buzzと言う</p></li>
<li><p>3の倍数かつ5の倍数のとき、FizzBuzzと言う</p></li>
</ul>
<p>上記3つのルールに反した人が負けになります。
6のときに「Fizz」ではなく「6」と言ってしまったり、10のときに「Buzz」と間違えて「Fizz」と言ってしまったりするとルール違反で負けです。
ルール違反なく30まで到達すると、プレイヤーは得も言われぬ達成感に包まれます。</p>
<p>うまくいっている例は、以下のような感じです。</p>
<ul class="simple">
<li><p>Aさん「1」</p></li>
<li><p>Bさん「2」</p></li>
<li><p>Cさん「Fizz」</p></li>
<li><p>Dさん「4」</p></li>
<li><p>Aさん「Buzz」</p></li>
<li><p>Bさん「Fizz」</p></li>
<li><p>:</p></li>
</ul>
<p>ちなみに「Fizz」は炭酸の気泡のようにシューシューいう音で、
「Buzz」はハチや機械がブンブンいう音を表します。</p>
<p>プログラミングの練習問題としてのFizzBuzzは、1人で遊ぶ形になります。
1人で1から30の数値を上記のルールを満たすように言って（＝画面に表示して）いきます。
FizzBuzzをルール違反なく遊ぶプログラムを作って、プレイヤーの処理系を得も言われぬ達成感に包みましょう！</p>
<p>本書で解説したプログラムの3大構造を理解していれば、FizzBuzzは十分に解けます。
次の項から解説を始めますが、<strong>「ここまで分かれば後は自力で書けるかも」と思えたら、本を閉じて手を動かす</strong> ことをおすすめします。</p>
<p>以下の手順で、FizzBuzzを解くプログラム <code class="docutils literal notranslate"><span class="pre">fizzbuzz.py</span></code> を作ります。</p>
<ol class="arabic simple">
<li><p>1から30までを順に表示するプログラムを作る</p></li>
<li><p>3の倍数のとき、Fizzを表示するように変更</p></li>
<li><p>5の倍数のとき、Buzzを表示するように変更</p></li>
<li><p>3の倍数かつ5の倍数のとき、FizzBuzzを表示するように変更</p></li>
</ol>
</section>
<section id="id8">
<h3><span class="section-number">8.3.2. </span>1から30までを順に表示する<a class="headerlink" href="#id8" title="Link to this heading">¶</a></h3>
<p>この項目は手を動かさずに読むことをおすすめします。
新しく解説する項目があるからです。</p>
<p>「1から30までを順に表示」と聞いてどんな方法が思い浮かぶでしょうか？
<code class="docutils literal notranslate"><span class="pre">for</span></code> 文と1から30までの整数が順にまとまったリストがあれば実現できそうですね。</p>
<p>1から30までの整数を1つずつ書いてリストを作るのは大変ですよね。
そんなときは、関数 <code class="docutils literal notranslate"><span class="pre">range</span></code> が使えます。
<code class="docutils literal notranslate"><span class="pre">range</span></code> 関数も、複数の値を扱う仕組みの1つです。</p>
<table class="docutils align-center" id="id27">
<caption><span class="caption-text">複数の整数を並べる関数</span><a class="headerlink" href="#id27" title="Link to this table">¶</a></caption>
<tbody>
<tr class="row-odd"><td><p>箱の名前</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">range</span></code></p></td>
</tr>
<tr class="row-even"><td><p>箱は何をするか</p></td>
<td><p>1,2,3,...のように整数を並べる</p></td>
</tr>
<tr class="row-odd"><td><p>箱に入れるもの</p></td>
<td><p>整数2つ（1つ目が始めを表し、2つ目が終わりを表す。始めは含むが、終わりは含まない）</p></td>
</tr>
<tr class="row-even"><td><p>箱から出てくるもの</p></td>
<td><p>整数の並び（リストのように扱える）</p></td>
</tr>
</tbody>
</table>
<p><code class="docutils literal notranslate"><span class="pre">for</span></code> 文の練習では、リスト <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]</span></code> から値を繰り返し表示するプログラムを書きましたね。
これは <code class="docutils literal notranslate"><span class="pre">range</span></code> 関数を使っても書けます。</p>
<div class="literal-block-wrapper docutils container" id="id28">
<div class="code-block-caption"><span class="caption-text">renshu_for.py</span><a class="headerlink" href="#id28" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;for文の練習プログラムを開始します&quot;</span><span class="p">)</span>
<span class="hll"><span class="linenos">2</span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">):</span>
</span><span class="linenos">3</span>    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="linenos">4</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;プログラムを終了します&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">range(1,</span> <span class="pre">4)</span></code> は、<strong>1から3までの整数の並び</strong> を返します。
これは、リスト <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]</span></code> と同じように <code class="docutils literal notranslate"><span class="pre">for</span></code> 文で使えます。
<code class="docutils literal notranslate"><span class="pre">range</span></code> 関数の第2引数より1小さい数までという点に注意しましょう。</p>
<p><code class="docutils literal notranslate"><span class="pre">range</span></code> 関数を使って、1から30までを順に表示しましょう
（やり方に見当がついている方は本を閉じて手を動かしてみてください）。</p>
<div class="literal-block-wrapper docutils container" id="id29">
<div class="code-block-caption"><span class="caption-text">fizzbuzz.py</span><a class="headerlink" href="#id29" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">):</span>
<span class="linenos">2</span>    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>コマンドラインで動作確認しましょう。</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span>python<span class="w"> </span>fizzbuzz.py
<span class="m">1</span>
<span class="m">2</span>
<span class="m">3</span>
<span class="m">4</span>
<span class="m">5</span>
:<span class="w"> </span><span class="o">(</span>省略<span class="o">)</span>
<span class="m">28</span>
<span class="m">29</span>
<span class="m">30</span>
</pre></div>
</div>
<p>1から30までの整数が順番に表示されました！</p>
</section>
<section id="fizz">
<h3><span class="section-number">8.3.3. </span>3の倍数のとき、Fizzを表示する<a class="headerlink" href="#fizz" title="Link to this heading">¶</a></h3>
<p>この項目も手を動かさずに読むことをおすすめします（新しく解説することがあります！）。</p>
<p>続いて、3の倍数のとき、Fizzと表示するようにプログラムを変更します。
これは分岐を使えばいいですね。</p>
<ul class="simple">
<li><p>3の倍数であれば、Fizzを表示する</p></li>
<li><p>3の倍数でなければ、その数を表示する</p></li>
</ul>
<p>では、「<strong>3の倍数</strong> である」を表す式はどうなるでしょうか。
3の倍数とは、「3で割った時に割り切れる（<strong>余りが0</strong> になる）数」です。</p>
<p>プログラミング言語には、数を <strong>割った余り</strong> を求める演算子が用意されています。
数 <code class="docutils literal notranslate"><span class="pre">a</span></code> を 数 <code class="docutils literal notranslate"><span class="pre">b</span></code> で割った余りは <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">%</span> <span class="pre">b</span></code> で計算できます。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="mi">4</span> <span class="o">%</span> <span class="mi">3</span>  <span class="c1"># ((4 ÷ 3 = 1 ・・・ 1))</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">5</span> <span class="o">%</span> <span class="mi">3</span>  <span class="c1"># ((5 ÷ 3 = 1 ・・・ 2))</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">6</span> <span class="o">%</span> <span class="mi">3</span>  <span class="c1"># ((6 ÷ 3 = 2 ・・・ 0))</span>
<span class="go">0</span>
</pre></div>
</div>
<p>3で割った余りが0かどうか比較することで、3の倍数かどうかを判定できます
（やり方に見当がついている方は本を閉じて手を動かしてみてください）。</p>
<div class="literal-block-wrapper docutils container" id="id30">
<div class="code-block-caption"><span class="caption-text">fizzbuzz.py</span><a class="headerlink" href="#id30" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">):</span>
<span class="linenos">2</span>    <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="linenos">3</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Fizz&quot;</span><span class="p">)</span>
<span class="linenos">4</span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos">5</span>        <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">%</span> <span class="pre">3</span> <span class="pre">==</span> <span class="pre">0</span></code> という式（数 <code class="docutils literal notranslate"><span class="pre">i</span></code> を <code class="docutils literal notranslate"><span class="pre">3</span></code> で割った余りが <code class="docutils literal notranslate"><span class="pre">0</span></code> と <strong>等しい</strong>）で
3の倍数かどうか判定します。
動作確認しましょう。</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span>python<span class="w"> </span>fizzbuzz.py
<span class="m">1</span>
<span class="m">2</span>
Fizz
<span class="m">4</span>
<span class="m">5</span>
:<span class="w"> </span><span class="o">(</span>省略<span class="o">)</span>
<span class="m">28</span>
<span class="m">29</span>
Fizz
</pre></div>
</div>
<p>3の倍数の時にFizzと表示するようになりました！</p>
</section>
<section id="buzz">
<h3><span class="section-number">8.3.4. </span>練習問題1：5の倍数のとき、Buzzを表示する<a class="headerlink" href="#buzz" title="Link to this heading">¶</a></h3>
<p>この項目はぜひ本を閉じて、手を動かしてみてください。</p>
<p>ヒント：5の倍数のとき、Buzzと表示するのは、3の倍数のときを参考にすればいいですね。</p>
<div class="answer admonition">
<p class="admonition-title">[解答]</p>
<p><code class="docutils literal notranslate"><span class="pre">fizzbuzz.py</span></code> の分岐を増やします。</p>
<ul class="simple">
<li><p>3の倍数であれば、Fizzを表示する</p></li>
<li><p>3の倍数ではないが5の倍数であれば、Buzzを表示する</p></li>
<li><p>3の倍数でも5の倍数でもなければ、その数を表示する</p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id31">
<div class="code-block-caption"><span class="caption-text">fizzbuzz.py</span><a class="headerlink" href="#id31" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">):</span>
<span class="linenos">2</span>    <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="linenos">3</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Fizz&quot;</span><span class="p">)</span>
<span class="hll"><span class="linenos">4</span>    <span class="k">elif</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span class="hll"><span class="linenos">5</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Buzz&quot;</span><span class="p">)</span>
</span><span class="linenos">6</span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos">7</span>        <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>以上で、5の倍数のときにBuzzと表示されるようになります。</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span>python<span class="w"> </span>fizzbuzz.py
<span class="m">1</span>
<span class="m">2</span>
Fizz
<span class="m">4</span>
Buzz
:<span class="w"> </span><span class="o">(</span>省略<span class="o">)</span>
<span class="m">28</span>
<span class="m">29</span>
Fizz
</pre></div>
</div>
</div>
<p>最後の <code class="docutils literal notranslate"><span class="pre">30</span></code> は3の倍数であり、5の倍数でもあります。
分岐では、<strong>まず3の倍数か確認</strong> し、<code class="docutils literal notranslate"><span class="pre">30</span></code> は3の倍数と判定されるので、Fizzと表示されていますね。
次はいよいよ、ここをFizzBuzzという表示に変えます！</p>
</section>
<section id="id9">
<h3><span class="section-number">8.3.5. </span>練習問題2：3の倍数かつ5の倍数のとき、FizzBuzzを表示する<a class="headerlink" href="#id9" title="Link to this heading">¶</a></h3>
<p>この項目もこれまでに学んだことで進められます。
本を閉じて、手を動かしてみてください。</p>
<p>ヒント：「3の倍数かつ5の倍数」とは、「15の倍数」と同じです。
15の倍数と考えると、3の倍数や5の倍数のときと同じようにプログラムを書けそうですよね。</p>
<div class="answer admonition">
<p class="admonition-title">[解答] <code class="docutils literal notranslate"><span class="pre">elif</span></code> で分岐を追加すると？</p>
<p>15の倍数のときの分岐を追加してみます（6, 7行目）。</p>
<div class="literal-block-wrapper docutils container" id="id32">
<div class="code-block-caption"><span class="caption-text">fizzbuzz.py（15の倍数の分岐を追加）</span><a class="headerlink" href="#id32" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">):</span>
<span class="linenos">2</span>    <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="linenos">3</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Fizz&quot;</span><span class="p">)</span>
<span class="linenos">4</span>    <span class="k">elif</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="linenos">5</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Buzz&quot;</span><span class="p">)</span>
<span class="hll"><span class="linenos">6</span>    <span class="k">elif</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">15</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span class="hll"><span class="linenos">7</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;FizzBuzz&quot;</span><span class="p">)</span>
</span><span class="linenos">8</span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos">9</span>        <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>「できた！」と思って動作確認をすると・・・</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span>python<span class="w"> </span>fizzbuzz.py
<span class="m">1</span>
<span class="m">2</span>
Fizz
<span class="m">4</span>
Buzz
:<span class="w"> </span><span class="o">(</span>省略<span class="o">)</span>
<span class="m">28</span>
<span class="m">29</span>
Fizz
</pre></div>
</div>
<p>最後の数字 <code class="docutils literal notranslate"><span class="pre">30</span></code> は15の倍数なので、FizzBuzzと表示するルールです。
ところが、現在のプログラムはFizzと表示していて、ルールに違反しています（負けてしまいました）。</p>
<p>なぜこのような動きになっているか理解し、ルールを守るようにプログラムを直しましょう。</p>
</div>
<p>現在の分岐（<code class="docutils literal notranslate"><span class="pre">fizzbuzz.py</span></code> 2〜9行目）は以下のようになっています。</p>
<ul class="simple">
<li><p>3の倍数であれば、Fizzを表示する</p></li>
<li><p>3の倍数ではないが5の倍数であれば、Buzzを表示する</p></li>
<li><p>3の倍数でも5の倍数でもないが15の倍数であれば、FizzBuzzを表示する</p></li>
<li><p>3の倍数でも5の倍数でも15の倍数でもなければ、その数を表示する</p></li>
</ul>
<p>この分岐が、30のような15の倍数をどのように処理するか考えましょう。
<em>30は3の倍数</em> なので、<code class="docutils literal notranslate"><span class="pre">fizzbuzz.py</span></code> の2,3行目によりFizzを表示しますね。
FizzBuzzを表示する分岐が実行されることはないのです。</p>
<p>修正案が浮かんでいたら、続きを読む前に試してみてください。</p>
<div class="answer admonition">
<p class="admonition-title">[解答]</p>
<p>15の倍数の判定を一番最初に（<code class="docutils literal notranslate"><span class="pre">if</span></code> の直後の式で）実施するように分岐を修正します。</p>
<p><strong>15の倍数は3の倍数でも5の倍数でもある</strong> ので、15の倍数かどうかは最初に判定する必要があるのです。
逆に15の倍数でないとき、その数は3の倍数または5の倍数のいずれかかもしれません。
これらを判定する分岐は、<code class="docutils literal notranslate"><span class="pre">elif</span></code> で追加すれば十分です。</p>
<div class="literal-block-wrapper docutils container" id="id33">
<div class="code-block-caption"><span class="caption-text">fizzbuzz.py（正解例）</span><a class="headerlink" href="#id33" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">):</span>
<span class="hll"><span class="linenos">2</span>    <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">15</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span class="hll"><span class="linenos">3</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;FizzBuzz&quot;</span><span class="p">)</span>
</span><span class="linenos">4</span>    <span class="k">elif</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># ((ifからelifに変更))</span>
<span class="linenos">5</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Fizz&quot;</span><span class="p">)</span>
<span class="linenos">6</span>    <span class="k">elif</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="linenos">7</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Buzz&quot;</span><span class="p">)</span>
<span class="linenos">8</span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos">9</span>        <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>動作確認しましょう。</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span>python<span class="w"> </span>fizzbuzz.py
<span class="m">1</span>
<span class="m">2</span>
Fizz
<span class="m">4</span>
Buzz
:<span class="w"> </span><span class="o">(</span>省略<span class="o">)</span>
<span class="m">28</span>
<span class="m">29</span>
FizzBuzz
</pre></div>
</div>
<p>30の行の表示がFizzBuzzになっています!
また、手元で15の行の表示も確認してみてください。</p>
<p>以上でFizzBuzzを解くプログラムは完成です。</p>
</div>
<p>最後に紹介したプログラムが一発で書けるのを目標に何回か取り組んでみてください。</p>
<p>実はFizzBuzzはプログラムが書けない面接候補者をふるい落とすために15年前くらいから使われ始めたという出自があります。
FizzBuzzが独力で解けるようになったら、「プログラマーとしての基礎の力は身に付いた！」と自信を持ってください。</p>
<div class="column admonition">
<p class="admonition-title">[コラム] あとは順次・分岐・反復を使う練習あるのみ！</p>
<p>順次・分岐・反復を使ってFizzBuzzのプログラムを書きました。
<strong>どんなプログラムでも</strong>、それを形作る <strong>構造</strong> は、FizzBuzzのプログラムと共通の <strong>順次・分岐・反復</strong> です。
ここまで読み進めてきた皆さん、あとはプログラムを書く練習あるのみです！</p>
<p>続く2つの章は、この本の残りを読み進める上で必要になる事項の紹介です。
ですが、すぐにでも練習したいという方は、実際に使えるプログラムを作る他書に進み、
必要になったタイミングで戻ってくるという読み方でもかまいません。</p>
</div>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">start-programming-with-python</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="検索" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>ナビゲーション</h3>
<p class="caption" role="heading"><span class="caption-text">目次</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../300-value_integer_string/index.html">1. プログラムで数と文字を扱ってみよう</a></li>
<li class="toctree-l1"><a class="reference internal" href="../310-variables/index.html">2. 値を変数で扱おう</a></li>
<li class="toctree-l1"><a class="reference internal" href="../320-use_functions/index.html">3. 関数でまとまった処理を扱おう</a></li>
<li class="toctree-l1"><a class="reference internal" href="../330-input_output/index.html">4. プログラムの入力と出力を扱おう</a></li>
<li class="toctree-l1"><a class="reference internal" href="../340-define_functions/index.html">5. 関数を作って処理をまとめよう</a></li>
<li class="toctree-l1"><a class="reference internal" href="../350-in_order/index.html">6. 3大構造 一. 順次</a></li>
<li class="toctree-l1"><a class="reference internal" href="../360-fork/index.html">7. 3大構造 二. 分岐</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">8. 3大構造 三. 反復</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#for">8.1. <code class="docutils literal notranslate"><span class="pre">for</span></code> 文を使って、決まった回数繰り返す</a></li>
<li class="toctree-l2"><a class="reference internal" href="#while">8.2. <code class="docutils literal notranslate"><span class="pre">while</span></code> 文を使って、条件を満たす限り繰り返す</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fizzbuzz">8.3. 順次・分岐・反復の力試し（FizzBuzz）</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../380-list/index.html">9. 複数の値をまとめて扱おう</a></li>
<li class="toctree-l1"><a class="reference internal" href="../390-programmer_thinking/index.html">10. プログラマーの考え方を知ろう</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../360-fork/index.html" title="前の章へ"><span class="section-number">7. </span>3大構造 二. 分岐</a></li>
      <li>Next: <a href="../380-list/index.html" title="次の章へ"><span class="section-number">9. </span>複数の値をまとめて扱おう</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2022, nikkie.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.0.2</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../_sources/370-loop/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>